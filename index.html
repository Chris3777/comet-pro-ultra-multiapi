<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chris Agent</title>    <link rel="stylesheet" href="style.css">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
</head>
<body class="theme-dark">
<div class="app-container">
    <nav class="sidebar">
        <div class="brand">
            <i class="ri-infinity-line"></i>
                <span>Chris Agent</span>        </div>
        <div class="nav-items">
            <button onclick="app.newChat()" class="active" title="New Agent Session">
                <i class="ri-add-line"></i>
            </button>
            <button onclick="app.toggleConfig()" title="Connection Settings">
                <i class="ri-settings-4-line"></i>
            </button>
        </div>
        <div class="divider"></div>
        <div id="history-list" class="history-scroll"></div>
        <div class="status-indicator" id="status-dot" title="Disconnected"></div>
    </nav>

    <main class="chat-zone">
        <header class="chat-header">
            <div class="model-badge">
                <span id="current-model-name">Local Agent</span>
                <i class="ri-arrow-down-s-line"></i>
            </div>
        </header>

        <div id="chat-stream" class="chat-stream">
            <div class="empty-state">
                <h1>Where do you want to go?</h1>
                <div class="suggestion-chips">
                    <button onclick="app.quickPrompt('Draft a Python script to automate file sorting')">Automate Files</button>
                    <button onclick="app.quickPrompt('Design a landing page for a coffee shop')">Design UI</button>
                    <button onclick="app.quickPrompt('Explain Quantum Entanglement simply')">Deep Research</button>
                </div>
            </div>
        </div>

        <div class="input-zone">
            <div class="input-wrapper">
                <textarea 
                    id="user-input" 
                    placeholder="Ask anything..." 
                    rows="1"
                    oninput="this.style.height='';this.style.height=this.scrollHeight+'px'"
                ></textarea>
                <button id="send-btn" onclick="app.sendMessage()">
                    <i class="ri-arrow-right-up-line"></i>
                </button>
            </div>
            <div class="meta-info">
                Press Enter to send • Shift+Enter for new line • Local & Cloud Enabled
            </div>
        </div>
    </main>

    <aside class="artifact-zone" id="artifact-panel">
        <header class="artifact-header">
            <div class="tabs">
                <button class="tab active" onclick="app.switchTab('preview')">Preview</button>
                <button class="tab" onclick="app.switchTab('code')">Code</button>
            </div>
            <button class="icon-btn" onclick="app.copyArtifact()" title="Copy Code">
                <i class="ri-file-copy-line"></i>
            </button>
        </header>

        <div class="artifact-content">
            <div id="view-preview" class="view-layer active">
                <iframe 
                    id="preview-frame" 
                    sandbox="allow-scripts" 
                    title="Live Preview"
                ></iframe>
                <div class="preview-placeholder">
                    <i class="ri-code-box-line"></i>
                    <p>Generate HTML/Web code to see a live preview here.</p>
                </div>
            </div>
            <div id="view-code" class="view-layer">
                <pre><code id="code-display" class="language-javascript">console.log("Waiting for agent output...");</code></pre>
            </div>
        </div>
    </aside>
</div>

<div id="config-modal" class="modal hidden">
    <div class="modal-content">
        <h2><i class="ri-equalizer-line"></i> Neural Connection</h2>
        
        <div class="form-group">
            <label>Provider Type</label>
            <select id="provider-select" onchange="app.updateForm()">
                <option value="ollama">Ollama (Local)</option>
                <option value="openai">OpenAI Compatible</option>
                <option value="openrouter">OpenRouter (Any)</option>
            </select>
        </div>

        <div class="form-group">
            <label>Base URL</label>
            <input type="text" id="api-url" placeholder="http://localhost:11434/v1">
            <small>For Ollama use: http://localhost:11434/api/chat</small>
        </div>

        <div class="form-group">
            <label>API Key</label>
            <input type="password" id="api-key" placeholder="sk-...">
            <small>Leave empty for Local Ollama</small>
        </div>

        <div class="form-group">
            <label>Model Name</label>
            <input type="text" id="model-name" placeholder="llama3, gpt-4o, deepseek-r1">
        </div>

        <div class="modal-actions">
            <button onclick="app.toggleConfig()" class="btn-ghost">Cancel</button>
            <button onclick="app.saveConfig()" class="btn-primary">Connect Agent</button>
        </div>
    </div>
</div>

<script type="module" src="app.js"></script>
</body>
</html>
